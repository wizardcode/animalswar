<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<title></title>
		<style>
			#contain {
				padding: 100px;
				width: 800px;
				height: 1000px;
				margin: 0 auto;
				position: relative;
				background-color: #6495ED;
			}
			
			#contain .back {
				width: 200px;
				height: 200px;
				float: left;
				background-color: #6495ED;
				border-radius: 50px;
				border: 1px dashed #ffffff;
			}
			
			.item {
				width: 100px;
				height: 130px;
				background-color: red;
				left: 50px;
				top: 65px;
				position: absolute;
			}
			
			.buttom {
				width: 100px;
				height: 100px;
				background-color: #FAEBD7;
				left: 50px;
				top: 50px;
				border-radius: 50px;
				position: absolute;
			}			
			.choose {
				border: 2px dotted #FFFFFF;
			}
		</style>
	</head>

	<body>
		<div id="app">
			<div id="contain">

				<div class="back" v-for="(item,index) in 9" :id="gernerateId(index)"></div>
				<div class="buttom" v-for="(item,index) in animals" :style="{'left':(index%4)*200+50 +'px','top':parseInt(index/4)*200+50+'px'}" :id="gernerateBtmId(index)" @click="moveblank($event)">
				</div>
				<div v-model="isChoose" v-show="item.show===1" v-bind:class="{'item':true,'choose':index==isChoose}" v-for="(item,index) in animals" style="background: url(img/default.jpg)" :style="{'left':(index%4)*200+50 +'px','top':parseInt(index/4)*200+45+'px'}" :id="gernerateItemId(index)" @dblclick="choose(index)" @click="moveitem($event)">
					{{item.name}}
				</div>
			</div>

		</div>

		<script src="https://cdn.jsdelivr.net/npm/vue"></script>
		<script>
			var app = new Vue({
					el: '#app',
					data: {
						isChoose: -1,
						animals: [{
							id: 1,
							level: 1,
							name: '象',
							player: 1,
							show: 1,
							img:'img/1.png',
						}, {
							id: 2,
							level: 2,
							name: '狮',
							player: 1,
							show: 1,
							img:'img/2.png',
						}, {
							id: 3,
							level: 3,
							name: '虎',
							player: 1,
							show: 1,
							img:'img/3.png',
						}, {
							id: 4,
							level: 4,
							name: '豹',
							player: 1,
							show: 1,
							img:'img/4.png',
						}, {
							id: 5,
							level: 5,
							name: '狼',
							player: 1,
							show: 1,
							img:'img/5.png',
						}, {
							id: 6,
							level: 6,
							name: '狗',
							player: 1,
							show: 1,
							img:'img/6.png',
						}, {
							id: 7,
							level: 7,
							name: '猫',
							player: 1,
							show: 1,
							img:'img/7.png',
						}, {
							id: 8,
							level: 8,
							name: '鼠',
							player: 1,
							show: 1,
							img:'img/8.png',
						}, {
							id: 9,
							level: 1,
							name: '象',
							player: 2,
							show: 1,
							img:'img/9.png',
						}, {
							id: 10,
							level: 2,
							name: '狮',
							player: 2,
							show: 1,
							img:'img/10.png',
						}, {
							id: 11,
							level: 3,
							name: '虎',
							player: 2,
							show: 1,
							img:'img/11.png',
						}, {
							id: 12,
							level: 4,
							name: '豹',
							player: 2,
							show: 1,
							img:'img/12.png',
						}, {
							id: 13,
							level: 5,
							name: '狼',
							player: 2,
							show: 1,
							img:'img/13.png',
						}, {
							id: 14,
							level: 6,
							name: '狗',
							player: 2,
							show: 1,
							img:'img/14.png',
						}, {
							id: 15,
							level: 7,
							name: '猫',
							player: 2,
							show: 1,
							img:'img/15.png',
						}, {
							id: 16,
							level: 8,
							name: '鼠',
							player: 2,
							show: 1,
							img:'img/16.png',
						}, ]
					},
					created: function() {
						if(!Array.prototype.shuffle) {
							Array.prototype.shuffle = function() {
								for(var j, x, i = this.length; i; j = parseInt(Math.random() * i), x = this[--i], this[i] = this[j], this[j] = x);
								return this;
							};
						}
						this.animals.shuffle();
					},
					methods: {
						choose: function(index) {
							this.isChoose = index;
						},
						gernerateId: function(index) {
							return "back_" + index;
						},
						gernerateBtmId: function(index) {
							return "btm_" + index;
						},
						gernerateItemId: function(index) {
							return index;
						},
						moveitem: function(e) {
							$target_top = e.target.style.top;
							$target_left = e.target.style.left;
							$target_id = e.target.getAttribute('id');
							$item_self = document.getElementsByClassName('choose');
							if($item_self[0] == undefined) {
								e.target.style.background='url('+this.animals[$target_id].img;
							} else {
								$item_id = $item_self[0].getAttribute('id');								
								if(this.animals[$item_id].level < this.animals[$target_id].level && this.animals[$item_id].player != this.animals[$target_id].player) {
									this.animals[$target_id].show = 0;
									this.isChoose = -1;
									$item_self[0].style.top = $target_top;
									$item_self[0].style.left = $target_left;
									$item_self[0].classList.remove('choose');
								}else if(this.animals[$item_id].level == this.animals[$target_id].level && this.animals[$item_id].player != this.animals[$target_id].player){
									this.animals[$item_id].show=0;
									this.animals[$target_id].show = 0;
									this.isChoose = -1;
									$item_self[0].classList.remove('choose');
								}
								else {
									this.isChoose = -1;
									$item_self[0].classList.remove('choose');
								}
							}
						},
						moveblank: function(e) {
							$target_top = e.target.style.top;
							$target_left = e.target.style.left;
							$item_self = document.getElementsByClassName('choose');
							if($item_self[0] == undefined) {} else {
								this.isChoose = -1;
								$item_self[0].style.top = $target_top;
								$item_self[0].style.left = $target_left;
								$item_self[0].classList.remove('choose');
							}
						}
					},
				}

			)
		</script>
	</body>

</html>